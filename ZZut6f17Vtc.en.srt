1
00:00:00,960 --> 00:00:04,300
Hi everyone, It's Jakub Vanko for
Capturing Reality

2
00:00:04,460 --> 00:00:07,680
and I would like to welcome you to
today's webinar.

3
00:00:07,680 --> 00:00:13,780
The topic of this webinar is processing
of a cultural heritage site in the United Arab Emirates.

4
00:00:13,960 --> 00:00:16,260
It will be a tomb specifically.

5
00:00:16,360 --> 00:00:19,600
I won't try to pronounce the name of the tomb, because I would probably watched it,

6
00:00:19,640 --> 00:00:24,000
so instead of talking about it, let me
just show you in the next slide instead.

7
00:00:26,000 --> 00:00:32,020
So here we have a bird's eye view of the
tomb taken from a drone and at first glance

8
00:00:32,020 --> 00:00:35,120
you might think that this is very simple object,

9
00:00:35,120 --> 00:00:39,120
there shouldn't be any problems with the
alignment or reconstruction,

10
00:00:39,120 --> 00:00:43,120
well actually that is very far from the
truth. I spent a couple of days

11
00:00:43,120 --> 00:00:47,900
trying to align everything together, because
I had multiple image sets,

12
00:00:48,140 --> 00:00:50,560
these image sets were acquired

13
00:00:50,560 --> 00:00:54,960
in different periods of the day, so some
were acquired in the morning,

14
00:00:54,960 --> 00:01:01,360
some were acquired in the afternoon or
in the evening and I also had 3D laser scans.

15
00:01:01,920 --> 00:01:06,700
And the problem wasn't that I was getting multiple components, I was getting

16
00:01:06,700 --> 00:01:12,500
just one single component, but this component was containing misalignments.

17
00:01:13,120 --> 00:01:18,880
And I think the reason for this is, because
the image sets were acquired in different times of the day.

18
00:01:18,880 --> 00:01:25,420
These misalignments were causing visible artifacts both in the mesh surface and also in the texture.

19
00:01:26,140 --> 00:01:33,080
That is actually a good thing, because now I can actually show you, what I did to fix these problems,

20
00:01:33,080 --> 00:01:38,080
so when you encounter these misalignments in your own projects you will know what to do.

21
00:01:39,060 --> 00:01:41,820
I will go over the general workflow.

22
00:01:41,860 --> 00:01:48,379
I will not be describing in very in
much detail the tools that I am using, so that said I assume that you already 

23
00:01:48,379 --> 00:01:54,345
have some experience using a Reality Capture that you know the user interface.

24
00:01:54,345 --> 00:02:01,940
So if you are a total beginner I recommend you to go watch some of our beginner tutorials first and then

25
00:02:02,060 --> 00:02:05,020
this webinar will make much more sense to you.

26
00:02:05,020 --> 00:02:10,100
Okey? So now let's go over the main topics of this webinar.

27
00:02:10,100 --> 00:02:13,200
So first I will going to talk about the data capture,

28
00:02:13,200 --> 00:02:16,080
so I will introduce you the equipment that was used

29
00:02:16,080 --> 00:02:19,760
and also how many images were used

30
00:02:19,760 --> 00:02:24,880
during the reconstruction, because these are the things that people are very interested in.

31
00:02:24,940 --> 00:02:30,020
This will be a combination of photogrammetry and
terrestrial 3D laser scanning.

32
00:02:30,160 --> 00:02:34,240
I will go over the general workflow. So I will show you the settings I used.

33
00:02:34,240 --> 00:02:37,360
I will go over the alignment
reconstruction and texturing.

34
00:02:37,360 --> 00:02:42,820
I will be using the component workflow, 
because I had multiple image sets.

35
00:02:42,820 --> 00:02:48,360
I first aligned them separately, 
then export the components and bring them all together

36
00:02:48,360 --> 00:02:53,580
into a single master project, 
where I merge the components together

37
00:02:53,580 --> 00:02:56,660
and then continue with the processing.

38
00:02:56,720 --> 00:03:03,840
I will show you some CLI examples. CLI stands for command line interface and I was using

39
00:03:03,840 --> 00:03:07,080
CLI scripts for batch processing,

40
00:03:07,200 --> 00:03:12,920
because most of the processing on this
project was done in the evening or in the night, because

41
00:03:12,920 --> 00:03:17,360
I had other tasks during the day, I always
prepared a simple script

42
00:03:17,540 --> 00:03:23,220
that I launched in the evening and the next day in the morning, when I come to my computer,

43
00:03:23,840 --> 00:03:28,560
the processing will be finished and I
can continue where I left off.

44
00:03:28,560 --> 00:03:32,720
Okay, so the main topic will be fixing
the misalignments

45
00:03:32,720 --> 00:03:36,080
and I was using control points, but they
were not enough.

46
00:03:36,080 --> 00:03:39,360
I had to tweak the control point weights
to fix the misalignments,

47
00:03:39,360 --> 00:03:45,080
so I will go over that in detail. I was
extensively using selections and image lists

48
00:03:45,080 --> 00:03:51,060
for disabling enabling cameras. One reason
for this was that I was trying to

49
00:03:51,060 --> 00:03:54,960
find and disable the misaligned cameras,

50
00:03:54,960 --> 00:04:02,320
then I was using selections for reconstructing the mesh, that means that I tried to reconstruct the mesh only

51
00:04:02,320 --> 00:04:09,000
from laser scans and drone images to save time and later for the texturing process I was disabling

52
00:04:09,000 --> 00:04:17,380
the laser scans, because the laser scans would degrade the quality of the final texture. So we will go over that

53
00:04:17,380 --> 00:04:25,320
and in the end I was using texture reprojection, because I was still having some blurry blurry textures

54
00:04:25,340 --> 00:04:31,440
on the laser scan mesh and some artifacts, so what I did. I reconstruct a second mesh

55
00:04:31,560 --> 00:04:37,600
from photogrammetry only, textured it and
transferred this texture to the laser scan mesh,

56
00:04:37,680 --> 00:04:40,560
which has better geometry.

57
00:04:40,560 --> 00:04:45,840
I had to tweak the reprojection values little bit, but again

58
00:04:46,040 --> 00:04:50,380
I will go over that in detail during the webinar.

59
00:04:50,720 --> 00:04:54,820
So now let's take a look at the final result.

60
00:04:55,000 --> 00:04:58,600
So this is a render directly from Reality Capture.

61
00:04:59,060 --> 00:05:02,520
This is actually the simplified mesh it has around

62
00:05:02,520 --> 00:05:06,720
40 million polygons and it has

63
00:05:06,800 --> 00:05:13,360
three 16k textures applied to it. 
So I had to use three 16k textures

64
00:05:13,440 --> 00:05:21,240
to get the optimal texture size to achieve
the 100% quality, the best possible quality from the photos.

65
00:05:22,000 --> 00:05:28,900
Here, there´s another render again from Reality Capture, but this time in the solid view mode.

66
00:05:29,160 --> 00:05:33,400
So this is the best possible result I was able to achieve.

67
00:05:33,400 --> 00:05:37,360
It could still probably need some clean-up,

68
00:05:37,360 --> 00:05:43,280
but it is much much better than the first initial result, that I was getting.

69
00:05:43,920 --> 00:05:51,080
So in the next few slides I will show you the misalignments and how I fix them.

70
00:05:51,080 --> 00:05:57,280
So this is one example of the many
many misalignments I had in the project.

71
00:05:57,280 --> 00:06:01,920
So a double wall. So this is clearly a huge
misalignment.

72
00:06:01,920 --> 00:06:11,240
To fix this, I was using control points and weights of the control points, so and
this is what I get after the realignment.

73
00:06:12,840 --> 00:06:19,300
After I was happy with the alignment, I proceeded with the reconstruction of the mesh and that's

74
00:06:19,300 --> 00:06:24,400
when I noticed these artifacts, so
these artifacts are again caused by

75
00:06:24,420 --> 00:06:32,120
misalignments, but this time the misalignments were subtle, not so large than in the first example.

76
00:06:32,980 --> 00:06:36,340
This, this little mesh part that we
are looking at right now

77
00:06:36,400 --> 00:06:43,421
was reconstructed only from laser scans. And I was provided with pre-registered

78
00:06:43,421 --> 00:06:49,353
laser scan positions. So I didn't tweak the or mess or play with the alignment

79
00:06:49,353 --> 00:06:56,140
of the laser scans. So that means that something was wrong in the laser scan alignment.

80
00:06:56,420 --> 00:07:03,380
So I had to find the misaligned scan
stations and disabled them. So I was able to get this.

81
00:07:03,460 --> 00:07:14,560
Right away you can see that there is far less detail, because the misaligned scan stations were the closest to the wall. 

82
00:07:14,560 --> 00:07:22,440
So that's why there is less detail and also there is a little bit more noise on the wall, but this was the most

83
00:07:22,440 --> 00:07:25,760
consistent result, that I was able to achieve
from the laser scans.

84
00:07:25,760 --> 00:07:32,080
There were no large visible artefacts, only the mesh was not so detailed and it was little bit more noisy.

85
00:07:32,880 --> 00:07:37,199
But I decided to go with this result and
continue.

86
00:07:37,200 --> 00:07:43,280
Then after I textured the mesh, I got
these kinds of results, well it really

87
00:07:43,400 --> 00:07:48,260
doesn't look that great and this was again
caused by misalignments between

88
00:07:48,260 --> 00:07:50,560
the laser scans and between the photogrammetry.

89
00:07:51,680 --> 00:07:59,040
So then I was thinking how to fix this. 
So I recreated another mesh, but this time only from

90
00:07:59,040 --> 00:08:04,879
photogrammetry without any laser scans. I textured it and the textures were fine.

91
00:08:04,880 --> 00:08:10,240
And then I transferred the texture from
the photogrammetry mesh to the laser scan mesh,

92
00:08:10,280 --> 00:08:18,920
which has better geometry, but with the reprojection tool I was able to achieve this quality of the textures. 

93
00:08:18,920 --> 00:08:26,500
So much much better. So for it depends on your use case for someone this result

94
00:08:26,540 --> 00:08:31,099
would be good enough, but someone
would probably need a little bit clean up,

95
00:08:31,233 --> 00:08:38,180
little bit tweaking of the textures. It really depends on your use case, but I was happy with the result and 

96
00:08:38,220 --> 00:08:42,280
it was much much better than the first initial result.

97
00:08:44,240 --> 00:08:49,040
Okay, so let's talk a little bit about the data Capture.

98
00:08:49,040 --> 00:08:55,760
So equipment used, the data set
was provided by Global Digital Heritage. 

99
00:08:55,760 --> 00:09:00,900
So I would like to use this opportunity to thank them for the data set and

100
00:09:00,900 --> 00:09:05,580
they were using a DJI Phantom 4 Pro for acquiring the drone images.

101
00:09:05,580 --> 00:09:13,580
They used a Sony A7 Mark III with Sigma 14 millimeter lens for the ground images. They were using

102
00:09:13,760 --> 00:09:20,860
two fire focus scanners for the laser scanning and they also used GNSS receiver,

103
00:09:20,960 --> 00:09:27,080
Trimble Geo 7X for surveying the ground
control points. And these ground control points

104
00:09:27,080 --> 00:09:30,560
were used for georeferencing the project.

105
00:09:30,600 --> 00:09:41,260
So in total they acquired 57 laser scans, 895 drone images and 1698 terrestrial images. 

106
00:09:42,040 --> 00:09:46,100
And together they survived five ground control points.

107
00:09:47,160 --> 00:09:55,980
Okay, that would be for the initial presentation. So now we can start Reality Capture and continue with the

108
00:09:56,160 --> 00:10:04,140
live demonstration. So let's launch Reality Capture right here by double clicking on the icon.

109
00:10:05,120 --> 00:10:08,320
And right now I reset the application before. 

110
00:10:08,320 --> 00:10:12,880
So right now everything is using the
default settings.

111
00:10:12,880 --> 00:10:18,180
So first I want to bring in my my
settings, that I use for these kinds of projects.

112
00:10:18,200 --> 00:10:20,280
There are multiple ways how you can do this.

113
00:10:20,500 --> 00:10:26,010
You can actually go over each settings. So we have the application settings

114
00:10:26,010 --> 00:10:27,160
right here in the workflow tab,

115
00:10:27,160 --> 00:10:30,880
in the alignment tab we have the
alignment settings,

116
00:10:30,880 --> 00:10:34,720
in the reconstruction tab we have the
reconstruction settings,

117
00:10:34,720 --> 00:10:38,280
texturing settings and we also have the
unwrapped settings, but

118
00:10:38,280 --> 00:10:43,040
I can not activate it, because we have no
mesh.

119
00:10:43,120 --> 00:10:47,280
So you can go over each settings and set
everything manually, but that is a huge

120
00:10:47,280 --> 00:10:53,880
waste of time, so I created presets for my
projects. And to apply these settings, 

121
00:10:53,940 --> 00:11:00,460
I would go to the workflow tab, go to the application settings, go to the global settings and import.

122
00:11:02,100 --> 00:11:06,980
Okay, so let's do that right now. Yes, import
of global settings will overwrite your current settings.

123
00:11:07,000 --> 00:11:10,000
Are you sure you want to perform this 
action? Yes, I'm totally sure.

124
00:11:10,000 --> 00:11:14,000
And I do not want to show this again.

125
00:11:14,000 --> 00:11:21,020
Okay, so let me find my settings folder. 
Yes, global settings. That's my name.

126
00:11:21,020 --> 00:11:34,220
So these are my settings, click on open. And the application needs to restart, because I'm changing

127
00:11:34,480 --> 00:11:39,160
the cache location from the system temp file to my dedicated SSD drive

128
00:11:39,160 --> 00:11:43,840
Okay, so it will need to restart.

129
00:11:44,720 --> 00:11:48,480
So let's wait for Reality Capture to restart.

130
00:11:48,560 --> 00:11:54,860
So this is my blank project and now when I
open the settings again we can see that something´s changed.

131
00:11:54,860 --> 00:12:02,040
Right away you can see that the cache location changed to my G drive that is my dedicated SSD drive and

132
00:12:02,040 --> 00:12:09,620
another thing that I changed here is the import settings by default the group calibration by Exif is set to no.

133
00:12:10,160 --> 00:12:21,280
I like to set this to yes for the first initial alignment, because this way Reality Capture will treat the images

134
00:12:21,420 --> 00:12:29,020
from each camera, with the same lenses, as the same group, so they will have the same calibration parameters.

135
00:12:29,120 --> 00:12:34,160
For the next alignment I will ungroup
them to fine-tune the alignment,

136
00:12:34,160 --> 00:12:38,160
but I will talk about it in detail during
the alignment.

137
00:12:38,160 --> 00:12:44,600
Another thing, that I changed here.. Coordinate system, yes, this is changed by default,

138
00:12:44,600 --> 00:12:47,200
it's the local coordinate system Euclidean.

139
00:12:47,200 --> 00:12:54,400
This project is in WGS84, because the
ground control points were also surveyed in this

140
00:12:54,400 --> 00:13:02,120
coordinate system and the output system
is set to WGS84 UTM zone 40N, because

141
00:13:02,120 --> 00:13:06,460
that is the corresponding zone to the area 
that we are working in.

142
00:13:08,400 --> 00:13:17,009
Okay, one more thing. If you want to import your settings, but only you want to

143
00:13:17,009 --> 00:13:21,540
for example, you want to change only the application settings, or you only want to change

144
00:13:21,540 --> 00:13:29,460
the alignment settings, right here. So you will not use the import global settings, but

145
00:13:29,460 --> 00:13:37,000
you can use this tool. You can reset the settings here, or you can load the settings and this tool will only change

146
00:13:37,040 --> 00:13:42,600
the alignment settings. So here you can see again. I have some presets, alignment settings echo,

147
00:13:42,600 --> 00:13:51,040
reconstruction settings echo, texturing settings, unwrap settings and so on. So if you had different presets, but

148
00:13:51,040 --> 00:13:55,440
you want to keep for example the reconstruction settings the same and the application settings. You just

149
00:13:55,440 --> 00:13:59,668
want to say change the alignment
settings you would use this method.

150
00:14:00,334 --> 00:14:05,700
But this time It´s totally the same thing. So I will click on cancel.

151
00:14:07,020 --> 00:14:12,365
Okay, let's quickly go over the alignment settings. So I will show you 

152
00:14:12,365 --> 00:14:20,960
what I changed. Max features per
image 10 000 that's the same thing,

153
00:14:20,960 --> 00:14:27,180
max features per image. I actually use the default value. So I will keep it at 40 000.

154
00:14:27,200 --> 00:14:35,827
Image overlap, I always use image overlap
set to low. It suggests from my experience this is

155
00:14:35,827 --> 00:14:40,900
the best way to go. But you may
have a different experience.

156
00:14:40,940 --> 00:14:47,240
Another thing that I changed. Max feature reprojection error by default it´s set to two pixels.

157
00:14:47,240 --> 00:14:55,560
So we can change that to two, but for the second and third alignment I always try to lower the max feature

158
00:14:55,560 --> 00:15:03,160
reprojection error. So for the first initial alignment I will use two camera prior settings. All of all this is the same,

159
00:15:03,160 --> 00:15:14,720
because the terrestrial images have no priors. The drone images have priors, but the GNSS receiver on board

160
00:15:14,720 --> 00:15:18,480
of the drone is less accurate than a survey grade GNSS receiver.

161
00:15:18,640 --> 00:15:26,560
So the accuracy XYZ accuracy 10 meters, that should be okay.

162
00:15:26,580 --> 00:15:35,700
And okay for control point prior settings, I will leave this at default, because Global Digital Heritage didn´t provide

163
00:15:35,700 --> 00:15:40,614
the accuracy of the surveyed ground control points, but this is pretty reasonable. Five centimeters

164
00:15:40,614 --> 00:15:46,680
in the horizontal accuracy and ten
centimeters into vertical accuracy.

165
00:15:46,760 --> 00:15:54,620
I think, that it should be even better. 
Okay a draft mode nothing. And in the advanced,

166
00:15:54,640 --> 00:16:02,960
I changed the distortion model from brown three to brown three with tangential and I will

167
00:16:02,960 --> 00:16:06,460
keep the pre-selector features to ten thousand, that is also the default value.

168
00:16:07,980 --> 00:16:11,120
This extra sensitivity that's the default value to medium.

169
00:16:11,120 --> 00:16:20,020
One tip, if you are using only drone images and you are getting the banana effect. If you are using drone

170
00:16:20,020 --> 00:16:24,920
photogrammetry you probably know, what I´m talking about. To fix this banana effect I recommend you to

171
00:16:25,040 --> 00:16:30,420
always group your images together and
use brown pre with tangential tool distortion model.

172
00:16:30,420 --> 00:16:32,800
This will fix it.

173
00:16:34,000 --> 00:16:40,940
Okay, the reconstruction settings should
be all set to default values right now.

174
00:16:43,240 --> 00:16:51,360
Let's just check really quickly. GPU to use, yes my GeForce RTX 2070, let's set to true. 

175
00:16:51,360 --> 00:16:59,480
Okay, image downscale previews, downscale is set to four normal model is set to two by default. 

176
00:16:59,560 --> 00:17:04,120
When I was reconstructing the
photogrammetry mesh I was using the image downscale set to four.

177
00:17:04,120 --> 00:17:08,000
So it wouldn't take so long.

178
00:17:08,000 --> 00:17:15,860
But again, I will get to that. This is the
defaults, mesh calculation defaults, preview model,

179
00:17:17,200 --> 00:17:23,680
use parchment cloud, yes. I didn't change
any of these values.

180
00:17:25,280 --> 00:17:29,700
And here, mesh filtering, model import, these are all the defaults.

181
00:17:29,800 --> 00:17:37,160
I didn't change a thing here. 
For the texturing, let's check the texture settings and

182
00:17:37,160 --> 00:17:40,380
let's check the default unwrap parameters. Yes, I changed this. 

183
00:17:40,520 --> 00:17:46,160
I changed this maximal texture resolution 16k and style by default is set to

184
00:17:46,160 --> 00:17:52,140
maximal texture count. And It´s set to one like this, but I will use the fixed

185
00:17:52,140 --> 00:18:00,060
axle size and optimal text size to get the 100% of the 100% quality of the texture.

186
00:18:01,440 --> 00:18:06,340
So if I change something, I will go back
here and I will explain you, why I change it.

187
00:18:06,340 --> 00:18:12,380
So now we can bring in the images. So there are multiple ways how to do this. 

188
00:18:12,380 --> 00:18:19,200
You can go to the workflow tab and use one of these icons, use the inputs icon or

189
00:18:19,300 --> 00:18:25,740
the folder icon or you can drag and drop
the images right here into user interface.

190
00:18:25,740 --> 00:18:32,160
Lately I'm using a lot of shortcuts. So the shortcut for add folder is Ctrl plus Shift plus Enter. 

191
00:18:32,160 --> 00:18:35,360
So I will press Ctrl Shift plus enter

192
00:18:35,360 --> 00:18:42,320
and navigate to my folder, my work folder. Photogrammetry yes, this is the tomb. 

193
00:18:42,320 --> 00:18:47,260
Image set and let´s use this tomb interior.

194
00:18:47,260 --> 00:18:56,680
Global Digital Heritage provided me both with RAW´s and JPEG´s. And I proceeded with the JPEG´s. I didn´t tweak

195
00:18:57,040 --> 00:19:03,300
I didn't make any changes to the RAW´s and exported the JPEG´s. I just used the JPEG´s they provided me.

196
00:19:03,440 --> 00:19:10,600
Okay, so select the folder. Click on OK and right away you can see the imported images right here.

197
00:19:10,600 --> 00:19:20,040
In the 2DS view. When I change this to 1DS, we can see how many images were imported, so 779 images.

198
00:19:21,380 --> 00:19:26,600
So the next thing you would do. You just would go to launch the alignment. 

199
00:19:26,600 --> 00:19:33,835
Either from the workflow tab right here. Click on align images or you can do the same from the alignment tab here. 

200
00:19:34,501 --> 00:19:43,040
Online images or again I´m using shortcuts. So I will, I would press F6 to align the images and then you would

201
00:19:43,100 --> 00:19:47,600
have to wait a couple of minutes for the alignment to finish, but I actually didn´t.

202
00:19:47,600 --> 00:19:55,000
I didn't work like this. As I mentioned, I will
show you some CLI scripts. So what I did next. 

203
00:19:55,000 --> 00:20:01,920
I didn´t even save the project. You could save the project and then launch the project from the CLI

204
00:20:01,940 --> 00:20:09,400
script and run the alignment like that, but
what I did instead is, I exported an image list.

205
00:20:09,400 --> 00:20:19,540
So I clicked on this. I created a special folder just for the image lists. Let me just find it. It should be, yes here. 

206
00:20:19,600 --> 00:20:25,480
Image lists and I created an image list.
And I will show you what what it did.

207
00:20:25,580 --> 00:20:33,140
So, I will just keep the default name images
dot image list, click on save and let me check,

208
00:20:33,480 --> 00:20:43,280
let me show you, what it what It´s containing. So let's go to brought, not settings, projects image lists,

209
00:20:44,000 --> 00:20:51,340
here and when I open it, well It´s actually
what it says it is. So, It´s It´s list of images,

210
00:20:51,340 --> 00:20:58,000
image list and I will use these image lists later for selecting the images.

211
00:20:58,080 --> 00:21:03,760
It can really speed up things, because
imagine that you have a 3000 cameras

212
00:21:03,760 --> 00:21:09,300
aligned together and now from multiple
image sets and now you have to select them, so

213
00:21:09,560 --> 00:21:12,960
in this case image lists are the way to go.

214
00:21:13,600 --> 00:21:21,960
So, I exported the image lists for each each image for each image set, so I will delete this one,

215
00:21:21,960 --> 00:21:27,440
this is the one I created now. I have the all
inputs image list, I have the laser scans image list

216
00:21:27,440 --> 00:21:29,919
drone image drone images image list,

217
00:21:29,920 --> 00:21:36,600
terrestrial images from the afternoon, 
from the morning and then there's the tomb interior image list.

218
00:21:38,440 --> 00:21:45,420
And I prepared the CLI script and let me
check the CLI script should be right here, alignment advanced.

219
00:21:45,500 --> 00:21:52,740
Yes, let me open it and let´s get over this script really quickly.

220
00:21:53,120 --> 00:22:02,680
So, the first line will set the Reality Capture installation folder to the path.

221
00:22:03,740 --> 00:22:10,260
The second line will set my working folder as an environment variable, so when I'm

222
00:22:10,260 --> 00:22:15,380
saving or when I'm saving the project, opening the project, I don´t have to always write this whole path.

223
00:22:15,380 --> 00:22:21,960
I will just instead of the whole path, I would just use this cesta, cesta means path in Slovak language, so

224
00:22:21,960 --> 00:22:32,260
I use this word. So, first I would the script would launch a Reality Capture, created a new scene,

225
00:22:32,300 --> 00:22:40,880
set app group calibration Exif to true, this means that this is the this is the same setting like this setting.

226
00:22:40,900 --> 00:22:42,640
I will show you in the user interface.

227
00:22:42,880 --> 00:22:51,360
Workflow, settings, import. Yes, group calibration by Exif. It's already set to yes, so Reality Capture would

228
00:22:51,360 --> 00:22:54,960
remember this, but I just put it here.

229
00:22:54,960 --> 00:23:00,580
Just in case, I was just copying and
pasting, because I had a lot of CLI scripts, so I was

230
00:23:00,580 --> 00:23:07,780
copy and pasting and building building this script really quickly, set instruction for motion images overlap to low.

231
00:23:08,000 --> 00:23:12,320
Yeah that is, that is this setting right here.

232
00:23:12,340 --> 00:23:22,160
Alignment settings, image overlap low, the 
next setting set structure from motion max feature

233
00:23:22,160 --> 00:23:28,500
reprojection error to 2 and that is the default value, structure for motion detector sensitivity medium that is

234
00:23:28,500 --> 00:23:33,660
again the default value. Set structure for
motion distortion model, this is brown 3 with

235
00:23:33,660 --> 00:23:39,980
tangential 2, so by default It´s just brown
three. Set project coordinate system

236
00:23:39,980 --> 00:23:45,360
EPS G4326 that is WGS84 and this is the

237
00:23:45,360 --> 00:23:53,920
output coordinate system, this is the UTM
40N zone, then it would edge, it would add all of the

238
00:23:53,920 --> 00:23:57,900
images from this image list, so this is, this is the drone image list.

239
00:23:57,900 --> 00:24:03,460
It would add all of the images. 
It would align with the alignment settings that were set.

240
00:24:03,500 --> 00:24:08,300
After the alignment it would save the project here.

241
00:24:08,940 --> 00:24:16,340
I would import the image selection this time to select all of the cameras set prior calibration.

242
00:24:16,400 --> 00:24:23,320
Calibration calibration group to minus one, this would ungroup them and I would also ungroup them from

243
00:24:23,320 --> 00:24:28,240
the prior lens group and align again.

244
00:24:28,240 --> 00:24:35,020
This would fine tune the alignment and
after this alignment I would save the project and quit RC

245
00:24:36,040 --> 00:24:44,460
Then it would again open RC, create a new scene and continue with the next image set, so the next image set

246
00:24:44,460 --> 00:24:53,420
is the terrestrial images from the afternoon. I don't have to repeat this set set all of these values, because

247
00:24:53,420 --> 00:25:03,540
they were already set and I would just again edit, add the images, line, save, select all of them, ungroup them, align

248
00:25:03,540 --> 00:25:12,120
again save and quit. And it would do for all of the image sets. Here this last Reality Capture instance would be

249
00:25:12,240 --> 00:25:19,560
create a new scene. Add the image list from the, this is the laser scans. I was already provided with the LSPS

250
00:25:19,600 --> 00:25:26,860
from Global Digital Heritage, align and save. There was no need for any kind of realignment, because they were

251
00:25:26,860 --> 00:25:34,600
imported as as fixed, because I was assumed, because I assumed that they pre-registered the laser scans

252
00:25:34,600 --> 00:25:39,600
in their own laser scanning application
and that would be more accurate than the

253
00:25:39,600 --> 00:25:47,520
alignment from RC. Safe, quit and this next and then this last command would shut down the computer, so it

254
00:25:47,600 --> 00:25:53,120
maybe this took, maybe one or two
hours and after that the computer would shut down and

255
00:25:53,120 --> 00:25:56,580
it wouldn't run during the whole night.

256
00:25:56,620 --> 00:26:03,720
So, after this script in the morning I had 
these one two three four five, five projects.

257
00:26:03,880 --> 00:26:08,160
Let me show you the results right now.

258
00:26:09,440 --> 00:26:13,279
I am running multiple instances of Reality
Capture if you're not aware.

259
00:26:13,280 --> 00:26:18,240
From version from version let me just check.

260
00:26:18,320 --> 00:26:25,620
Zero one nine three three you can run up to
four instances of Reality Capture at once, so

261
00:26:25,620 --> 00:26:31,900
if you didn't know that, so this is a new feature and it is actually quite good, because now, if you are running

262
00:26:31,900 --> 00:26:37,900
some kind of processing and one of your
clients come to your office and you want to

263
00:26:37,900 --> 00:26:40,460
show them something else, you can do that right now.

264
00:26:40,460 --> 00:26:46,320
You can keep running your processing and you can open another Reality Capture instance and open another

265
00:26:46,380 --> 00:26:51,780
project, so that's what I´m doing right here. 
So these are multiple stages of the processing.

266
00:26:52,900 --> 00:27:00,080
So, this instance is containing just the laser scans, so this is the laser scan compoment.

267
00:27:01,380 --> 00:27:09,160
Our support team is frequently receiving
e-mails that the laser scan point cloud is sparse, it is not

268
00:27:09,160 --> 00:27:15,860
so dense like in their laser scanning application. You do not have to worry about that at all, because all of the

269
00:27:15,860 --> 00:27:21,960
points are stored in the memory and all of 
the points will be used during reconstruction.

270
00:27:22,080 --> 00:27:27,680
So, if you don't see all of your points after
the alignment, you only see a sparse point cloud,

271
00:27:27,720 --> 00:27:30,340
everything is fine you don't have to worry about that all.

272
00:27:31,460 --> 00:27:41,180
So, these were the laser scans, now let's open for example this tomb interior. Will take a couple of seconds.

273
00:27:42,640 --> 00:27:51,860
Yes, so this is the interior again 778 images
were aligned from total of 779 images, so

274
00:27:51,940 --> 00:27:58,180
one image wasn't aligned. And you can actually check which wasn´t, which which image was not aligned.

275
00:27:58,300 --> 00:28:08,480
If I change the 1DS to 2DS right here and go to the scene context tab, but this view needs to be highlighted by this

276
00:28:08,480 --> 00:28:18,500
blue outline and you will click on show unregistered. Here you can check the image that wasn´t aligned.

277
00:28:18,500 --> 00:28:28,900
Let me change the layout to this layout one plus two and let me drag and drop here, so this image wasn´t aligned

278
00:28:29,280 --> 00:28:35,800
And it actually, It's pretty sharp, maybe there wasn't enough overlap between this image and the other

279
00:28:35,800 --> 00:28:39,300
images, so that´s the reason why it didn´t align together.

280
00:28:39,520 --> 00:28:48,020
Okay, so this is the tomb interior, let´s check the next component, terrestrial images morning.

281
00:28:49,100 --> 00:28:57,320
Let's open that. Yes, so this is the alignment. Let´s check how many images were aligned.

282
00:28:57,540 --> 00:29:04,380
So, all of them. All of them were aligned together and even here you can see the two components that were

283
00:29:04,380 --> 00:29:13,800
created, so this was the first alignment, when all of the cameras were grouped. Then then the images

284
00:29:13,860 --> 00:29:22,160
were ungrouped, aligned again and after the fact I just renamed the component from zero and one in brackets

285
00:29:22,160 --> 00:29:29,960
to terrestrial images morning I renamed them, because when I was exporting the components it would already

286
00:29:29,960 --> 00:29:35,060
have this name assigned, but I will show you how to export a component in a couple of minutes.

287
00:29:36,080 --> 00:29:41,320
Okay, so now let's check the next
component that was created it was these terrestrial

288
00:29:41,320 --> 00:29:54,600
images afternoon. And right away you will see a little little changes in the color and that´s, because it was

289
00:29:54,720 --> 00:30:01,140
shot in a different period of the day. So, this one´s our afternoon and the first ones were in the morning I think.

290
00:30:02,140 --> 00:30:13,260
500 of so for the first component 540 images out of 542 images were aligned and then the next alignment added

291
00:30:13,260 --> 00:30:19,800
one more image. And now when I select this component, because right now the first one is selected

292
00:30:19,800 --> 00:30:30,480
by this marker right next to the name. Let´s check which wasn´t aligned. Again highlight this section, this tab and

293
00:30:30,480 --> 00:30:40,680
go to the scene. I need to change it to this and click on unregistered so this image was not.

294
00:30:40,680 --> 00:30:46,840
Yeah and I see why because it is blurry and there´s a bag over here and a bottle of water.

295
00:30:47,600 --> 00:30:52,760
Yeah, so it makes sense that this image wasn't aligned, because It´s really not that great.

296
00:30:53,760 --> 00:30:59,680
Okay, let's open another component. 
So, the drone images. Okay, let's open

297
00:30:59,740 --> 00:31:05,600
these drone images and you will see something will be different in this component.

298
00:31:08,260 --> 00:31:13,880
Let me zoom out. You will see these
lines, so if you are using Reality Capture, so

299
00:31:13,880 --> 00:31:19,620
you probably know what these are. These are the residuals they show the difference between the

300
00:31:19,680 --> 00:31:24,640
prior position and the adjusted position
after the alignment.

301
00:31:24,660 --> 00:31:29,980
Because and these are actually
Geo-referenced and you can see that right here.

302
00:31:29,980 --> 00:31:36,860
In the 1DS. This marker, when I hover my mouse cursor over the marker you will see Geo-reference so the

303
00:31:36,860 --> 00:31:41,960
images were containing Geo-reference
and also the components which are Geo-referenced

304
00:31:41,960 --> 00:31:47,860
both of them. Actually I turned off the 
Geo-reference later when I was merging

305
00:31:47,860 --> 00:31:53,540
all the components together, but I will show you how I did that, because I was only using the Geo-reference

306
00:31:53,540 --> 00:31:56,960
from the ground control points.

307
00:31:57,420 --> 00:32:01,620
Okay, I'm not sure if this is the last
component, so let me check real quickly.

308
00:32:02,520 --> 00:32:08,240
Interior, yeah those are those that is all of them.

309
00:32:08,240 --> 00:32:12,640
So, now I will show you what I what I would
do next.

310
00:32:12,640 --> 00:32:20,600
I want to export this component. I would
go to the alignment tab, export, registration.

311
00:32:20,740 --> 00:32:24,460
But I need to have the proper component
selected again the first one is selected,

312
00:32:24,460 --> 00:32:32,140
so I want this one. A little change, let´s 
wait a few seconds, okay It´s changed.

313
00:32:32,200 --> 00:32:41,420
So, I would go to export, registration and components and here are my exported components.

314
00:32:41,480 --> 00:32:47,060
So, I would put in the name. The name is
the same like the name of the component right here and

315
00:32:47,060 --> 00:32:49,360
I would just click on save.

316
00:32:49,380 --> 00:32:57,580
But again I didn't use this way. I wrote a simple CLI script to do this for me, because I am very lazy and I like to

317
00:32:57,580 --> 00:33:05,560
batch process. So let me show you the script real quickly. So, here I have alignment component export.

318
00:33:05,560 --> 00:33:14,020
Let me open it in Notepad. So, here again this is just copy paste setting the paths again Reality Capture

319
00:33:14,020 --> 00:33:26,620
would load, launch. It would load the project, select the component 01, because the first component was

320
00:33:26,700 --> 00:33:33,420
component zero, the next component was zero one and then rename the select component to Mleiha tomb

321
00:33:33,420 --> 00:33:42,880
drone images. So, this is the same name as you see here. It´s the same name.

322
00:33:43,120 --> 00:33:48,159
Then export the selected component save
the project and quit.

323
00:33:48,160 --> 00:33:55,200
And I did this for all of the components. 
And this saved saved a few minutes, because

324
00:33:55,200 --> 00:34:04,100
for example the laser scan component it was very large and It´s I didn´t have to wait and sit by my computer

325
00:34:04,220 --> 00:34:17,320
to wait for it to finish. Okay, after I had all my components exported. I opened a new project.

326
00:34:17,380 --> 00:34:24,200
So, let's open a new project. And I imported all of the components to Reality Capture.

327
00:34:24,440 --> 00:34:31,920
So, I go either from the workflow tab and
import component or you can go or you can do it from

328
00:34:31,920 --> 00:34:41,180
the alignment tab, import component. And I would select all of my components and import them.

329
00:34:41,180 --> 00:34:45,000
I will just select one of them, because I don´t want it to take too long.

330
00:34:45,360 --> 00:34:54,280
So, this one. This is the smallest one. So, I will use this one. Let's wait for the component to import.

331
00:34:54,280 --> 00:35:01,980
So, just one second that's great and you will know a component is imported when you see it is this star

332
00:35:01,980 --> 00:35:05,880
next to the component name. So, imported component.

333
00:35:06,760 --> 00:35:15,440
So, I brought all of the components together and then I used this tool from the alignment tab, these merge

334
00:35:15,440 --> 00:35:22,060
components tool and this tool is actually a 
new feature. In the previous versions of Reality Capture

335
00:35:22,080 --> 00:35:28,920
you would have to go to the alignment settings. And the option is actually missing from here, but in the advanced

336
00:35:29,060 --> 00:35:35,760
in this advanced section you would have
merge components only and by default

337
00:35:35,780 --> 00:35:43,360
it is set to NO and when you set to YES it will only merge the components, it will not add new images to the components.

338
00:35:43,920 --> 00:35:50,140
So, we decided that this was confusing and
sometimes you would leave it on and then

339
00:35:50,140 --> 00:35:57,100
when you start a new project brought in your images then the first alignment you would have zero images

340
00:35:57,100 --> 00:36:02,900
aligned, because it would expect just to align the components together, so we removed it from here and

341
00:36:02,920 --> 00:36:08,480
bring it right here into the alignment tab. So, we just click click on this.

342
00:36:11,000 --> 00:36:20,200
One important thing to check is when you click on the for example this first input, you need to check

343
00:36:20,200 --> 00:36:27,380
these features, feature source. Features feature source here right here.

344
00:36:27,620 --> 00:36:34,120
So, when you, you have three options. 
You can use merge using overlaps,

345
00:36:34,460 --> 00:36:40,740
you would want to use this option when you have the same cameras in multiple components, but

346
00:36:40,740 --> 00:36:49,780
at this moment I don´t have that. I don´t have the same camera and multiple components.

347
00:36:49,780 --> 00:36:52,600
Okay, so I can not use this option.

348
00:36:52,600 --> 00:36:56,940
Then you have these two other options, use
component features or use all image features.

349
00:36:57,120 --> 00:37:05,400
So, use all image features would take a lot of time, because it would use literally like it says all of the image

350
00:37:05,400 --> 00:37:10,980
features, but instead I just want to use the
component features to merge the components together,

351
00:37:11,000 --> 00:37:15,340
so this was the, this was in this case this was the best option to use.

352
00:37:15,600 --> 00:37:22,320
So, I use this option and after that I would
just click on merge components.

353
00:37:24,040 --> 00:37:31,160
So, let me close this project and open the project that is containing all of the merged components.

354
00:37:31,460 --> 00:37:41,280
So, it is this one. All components and right
away you can see the part with the misalignment.

355
00:37:41,300 --> 00:37:49,080
So, right here. Here are the double walls, so
to fix this I will going to place control points, but it can

356
00:37:49,080 --> 00:37:56,000
be a little challenging in this situation when you have double walls, so I will show you how I managed

357
00:37:56,000 --> 00:38:05,760
to place the control points. So, first I will isolate the misaligned part. To do that, you can place the clip

358
00:38:05,780 --> 00:38:14,940
in box tool, but what I prefer to do is first
set up a reconstruction region. I will set it on the grid.

359
00:38:15,300 --> 00:38:25,260
So, I will use the same part right here as I used before for placing the control points. So, I will just

360
00:38:26,260 --> 00:38:28,400
place the reconstruction region on the grid.

361
00:38:28,400 --> 00:38:39,340
Adjust it´s bottom and top like this I can rotate it a little bit so I will jump to the top view by pressing 2

362
00:38:39,340 --> 00:38:45,920
on the numeric keyboard or you can do it from the scene context tab right here display.

363
00:38:47,280 --> 00:38:55,120
So, I will rotate it a little bit like this move it
adjust it.

364
00:38:56,160 --> 00:39:01,180
I'll take a look from the side from the left view by pressing 4 on the numeric keyboard.

365
00:39:01,180 --> 00:39:09,040
Okay, this is great. Press 0 to go back to the perspective view and now I will create a clipping box

366
00:39:09,360 --> 00:39:18,260
from the reconstruction region. So, to do
that I go to the scene, clipping box and create from

367
00:39:18,320 --> 00:39:22,380
reconstruction region like this. So and
everything is gone right now.

368
00:39:22,400 --> 00:39:35,140
I can even adjust it a little bit more, edit the 
clipping box like this. Great, now first I want to figure out

369
00:39:36,720 --> 00:39:44,640
which tie points or these points belong to
which camera or is this from laser scans or

370
00:39:44,640 --> 00:39:50,780
is this photogrammetry. So, let´s figure out that first. So, I need to select a couple of these points.

371
00:39:50,780 --> 00:39:57,780
I can use these point selection tools right here. I can use the rectangular tool or the lasso tool.

372
00:39:57,840 --> 00:40:02,980
I prefer the lasso tool, it can be also activated by pressing D on the keyboard.

373
00:40:03,920 --> 00:40:13,880
Select a couple of points for example here. Yeah, it´s okay and now to disable the tool press D again or

374
00:40:13,900 --> 00:40:21,040
you can also press the right mouse button to disable the tool or you can click also here.

375
00:40:21,300 --> 00:40:27,980
Now we have a couple of points highlighted and I will use the find images tool.

376
00:40:28,960 --> 00:40:32,940
And we have seven inputs selected, let me zoom out in the 3D view.

377
00:40:32,960 --> 00:40:40,700
Yes and we can see that those are actually the laser scans, so this second wall, this this wall is from

378
00:40:40,700 --> 00:40:43,359
the laser scans and this is from the
photogrammetry.

379
00:40:43,380 --> 00:40:51,020
And it also makes sense, because this wall has more noise you can, I´m not sure if you can see it in the video,

380
00:40:51,040 --> 00:40:56,280
but there are some floating points. 
So, and that is the noise from the photogrammetry.

381
00:40:56,280 --> 00:41:01,120
Laser scans are nice, nice and clean.

382
00:41:01,360 --> 00:41:09,300
Great, so now I want to place the control
point on this wall to find I need to find a good spot.

383
00:41:09,300 --> 00:41:19,440
So, let me change the layout to, yeah I can use this layout and I like to keep this top right corner as 3D

384
00:41:19,440 --> 00:41:31,660
and all of the rest as 2DS. And now I want to drag and drop these 7 selected images into a 2D view.

385
00:41:31,920 --> 00:41:39,380
So, I will hover over the selected image press Ctrl and drag and drop it right here.

386
00:41:40,720 --> 00:41:47,980
And now when I use the right arrow or left
arrow key I can browse them so let me use

387
00:41:47,980 --> 00:41:58,520
the right arrow key first. But I need to be in this view of course one, two, three, four, five, six, seven.

388
00:41:58,520 --> 00:42:07,060
I'm at the end. One, two, three, four, five, six, seven. Yeah, so I'm browsing only the selected cameras right now.

389
00:42:07,160 --> 00:42:14,680
So it is, It´s making a lot easier to place the control points. So, let me find a good spot to

390
00:42:14,820 --> 00:42:24,160
place the control point and I like this dark spot right over here. So, let´s place a new control point right here.

391
00:42:24,160 --> 00:42:32,100
To activate the control points tool I can go to the alignment tab and click here on control points tool or

392
00:42:32,140 --> 00:42:39,260
I can use the shortcut F3 which I prefer, because It´s much quicker so I will press F3.

393
00:42:40,240 --> 00:42:48,580
And click right here. So, it created a new control point number three and it is marked only on one image.

394
00:42:49,540 --> 00:42:59,780
Let me disable the tool for now and let's find another image. So, let´s use the right arrow key and

395
00:43:03,520 --> 00:43:13,120
I need to find similar feature to actually figure out where it should be.

396
00:43:19,960 --> 00:43:25,120
Not maybe here. I think this is the spot right here.

397
00:43:25,720 --> 00:43:41,140
So, again I can press F3 make sure that this point is highlighted or I can just drag and drop like this.

398
00:43:43,760 --> 00:43:50,420
Now we have, now we have two images
marked with this control point and I got

399
00:43:50,480 --> 00:43:56,760
some suggestions. So, we can actually check the suggestions when I click on the first image right here.

400
00:43:56,780 --> 00:44:02,800
The blue marker, so this blue marker is
corresponding this to this 2D view and

401
00:44:02,800 --> 00:44:10,600
now when I use the up and down arrow key I will just browse or go through these five images.

402
00:44:11,980 --> 00:44:23,020
Arrow down. So here's a suggestion. Here´s another one, here is another one, this one is already marked.

403
00:44:23,280 --> 00:44:26,400
And this is the last one.

404
00:44:26,560 --> 00:44:33,620
This is hard to see. This one's marked, this
one is also hard to see, but maybe this one

405
00:44:36,240 --> 00:44:46,100
should be OK. So, the error is under one pixel, so I can keep this to get rid of these two I will just it needs to be

406
00:44:46,100 --> 00:44:53,860
highlighted and I will just go and clear suggestions to get rid of them. OK, now I need to place this same

407
00:44:53,860 --> 00:45:04,780
control point on the next on the first wall. So, the wall from the photogrammetry. So, what I will do I will try to,

408
00:45:05,200 --> 00:45:12,720
I will activate the point selection tool by pressing D again. Make selection right here.

409
00:45:13,180 --> 00:45:20,180
Disable the tool by pressing D again and now click on find images.

410
00:45:21,200 --> 00:45:28,360
You can see that now I have a couple of
images highlighted that can see this spot.

411
00:45:29,520 --> 00:45:36,700
So, again I will just press Ctrl and drag and drop the images right here.

412
00:45:39,620 --> 00:45:46,920
Highlight the window and now when I use the left and right arrow keys I will just go through all of this

413
00:45:47,040 --> 00:45:53,560
all of these selected images. So, I have to 
find the same spot and place the control point right

414
00:45:53,560 --> 00:45:58,640
over there. So, I will use this image and I can use this image as reference.

415
00:45:58,660 --> 00:46:06,280
So, we have this large brick with this
color and I need to find it right here in the images.

416
00:46:07,920 --> 00:46:15,400
So, let me go. These are too far away. I want
to select one of the images that is closer to the wall.

417
00:46:15,480 --> 00:46:27,020
So, let me go back. Let me zoom in. Where is it? And this looks like this part and here is the dot.

418
00:46:27,320 --> 00:46:34,340
There is the dot right over there. OK, so again I can just activate the tool.

419
00:46:34,340 --> 00:46:39,440
Make sure this point is highlighted, because right now it is not highlighted.

420
00:46:39,440 --> 00:46:45,840
If I click here it will create a new control point. See control point for. I don't want that.

421
00:46:46,320 --> 00:46:56,380
Just delete it and I will drag and drop this control point right here, but you have to hold down the Ctrl key,

422
00:46:56,380 --> 00:46:59,680
otherwise you would move the control point in this image.

423
00:47:00,700 --> 00:47:06,420
Okay, so let's find another one. So, this one is good.

424
00:47:08,440 --> 00:47:18,020
Highlight it and now I should get more suggestions any minute if I place multiple control points.

425
00:47:18,040 --> 00:47:21,020
So, again here.

426
00:47:27,240 --> 00:47:33,480
And you can see that the errors are in red and this is, because of the misalignment.

427
00:47:33,840 --> 00:47:41,120
These errors shouldn't be so big. So, let's find more images and from different perspectives.

428
00:47:41,120 --> 00:47:46,880
Maybe let's try, maybe let's try a drone image.

429
00:47:47,680 --> 00:47:58,200
Let me go through the images really quickly. This is the spot right here again let's drag and drop.

430
00:48:00,320 --> 00:48:07,000
Now I started to get suggestions. So, let me go through these suggestions. So, I will click here

431
00:48:08,960 --> 00:48:13,040
and I will mark, see it's a little bit far away.

432
00:48:13,040 --> 00:48:19,240
And now when I'm still holding the left mouse button and now when I press the down arrow key

433
00:48:19,240 --> 00:48:27,760
it will confirm the point and it will switch to the next one. Like this. Again down arrow key,

434
00:48:29,520 --> 00:48:32,600
again, again..

435
00:48:34,740 --> 00:48:41,340
This is not good. So, when I release the left mouse button now it will mark it, but I know It's bad,

436
00:48:41,340 --> 00:48:45,520
so I will delete it right away. Delete this item.

437
00:48:46,800 --> 00:48:50,320
Maybe I can try this one.

438
00:48:51,840 --> 00:49:00,680
Right here and because these suggestions are so far away from the actual point, this is the indication of the

439
00:49:00,700 --> 00:49:06,880
misalignment, so this is the way I placed all of the control points.

440
00:49:07,020 --> 00:49:16,020
I will go back to the OnePlus One view right now. Make it a 3D view and clear the clipping box.

441
00:49:16,160 --> 00:49:20,120
I want to clear the clipping box, write this.

442
00:49:20,160 --> 00:49:24,020
I will clear the reconstruction region.

443
00:49:24,460 --> 00:49:33,160
And this is how I placed control points in multiple spots that were very misaligned, so I placed some here,

444
00:49:34,840 --> 00:49:43,060
I also placed some here. You can see that there is also a misalignment right here.

445
00:49:43,560 --> 00:49:47,500
This point should be right over here.

446
00:49:49,000 --> 00:49:58,440
And then I run the realignment with the default weights and actually nothing changed. It was the same way.

447
00:49:59,280 --> 00:50:04,420
Then what I did I selected all of the control
points like this.

448
00:50:06,080 --> 00:50:08,740
Wait, It´s different value, because this is the new one.

449
00:50:08,920 --> 00:50:11,700
I will get rid of it right now.

450
00:50:11,920 --> 00:50:20,200
Like this and right now they are set to 100, because I tried 50 and 50 was still not enough to correct

451
00:50:20,280 --> 00:50:30,720
the misalignment. So, I went all the way to 100 and after the alignment with the 100 weights I got this component.

452
00:50:30,740 --> 00:50:40,540
So, this is the misaligned one and now I will try to switch to the realigned one and you will see the differences.

453
00:50:46,260 --> 00:50:52,400
It will take a while, because probably the laser scan component is the one that is slowing

454
00:50:52,500 --> 00:51:02,560
all of the things down. Again I have some clipping box here so I will clear it. Let me go to the scene context tab

455
00:51:02,560 --> 00:51:13,520
and clear the clipping box right there and see the misalignments are gone. There are no double walls.

456
00:51:15,600 --> 00:51:23,720
So, I thought that everything was fine, but
there were still some subtle misalignments present that

457
00:51:23,720 --> 00:51:29,600
caused the artifacts in the meshing and in the texturing.

458
00:51:29,760 --> 00:51:37,040
Okay, so after I had this realigned component and you see that there is no marker here,

459
00:51:37,040 --> 00:51:41,920
there is no Geo-reference, let me just make this wider.

460
00:51:42,320 --> 00:51:48,380
There is no Geo-reference and that's, because when I was merging the components together,

461
00:51:49,600 --> 00:51:55,760
I selected all of the drone images and I can actually do that right now.

462
00:51:55,880 --> 00:52:03,280
I can actually do that. And this will be one 
of the use cases for the image list.

463
00:52:03,300 --> 00:52:12,140
So, I want to select all of the drone shots. So, I could actually go and select them manually using the camera

464
00:52:12,200 --> 00:52:18,760
Lasso 2, which is activated by pressing C and select them like this, then add to the selection by

465
00:52:18,760 --> 00:52:25,000
now I'm holding down the Ctrl key and adding to the selection, but this is not the way to go.

466
00:52:25,000 --> 00:52:34,500
So, I will press Ctrl D to deselect everything right click to deactivate the camera Lasso tool and let´s use the

467
00:52:34,580 --> 00:52:43,720
image list. So, I will go to the workflow tab and here I have the image selection.

468
00:52:43,860 --> 00:52:51,820
Click on that and let´s go to our folder with
our image lists.

469
00:52:54,800 --> 00:53:01,840
And It´s right here. I want to select the drone shots.

470
00:53:02,160 --> 00:53:11,480
These are the ones. Click open and now all
of my drone shots were selected.

471
00:53:13,440 --> 00:53:19,080
And the way I disabled the Geo-reference from the cameras was right here.

472
00:53:19,080 --> 00:53:24,060
So, I have 894 selected inputs and right here in the prior pose.

473
00:53:24,060 --> 00:53:32,660
Previously or originally there was position and orientation or just position I'm not sure right now.

474
00:53:32,660 --> 00:53:36,320
Position and orientation probably.

475
00:53:36,420 --> 00:53:43,480
And right now the residuals are huge, because the whole project shifted, because

476
00:53:43,480 --> 00:53:48,540
right now it is not a Geo-reference, It´s just shifted into an unknown place, but we will fix this.

477
00:53:49,040 --> 00:53:53,359
But this is the way how I disabled the
Geo-reference from the drone shot.

478
00:53:53,360 --> 00:53:58,100
So, I put this absolute post to unknown and
the residuals disappeared.

479
00:53:58,460 --> 00:54:06,440
Now, I want to Geo-reference this alignment. So, I need to bring in my ground control points.

480
00:54:07,360 --> 00:54:16,100
To import my ground control points I can do it from the workflow tab using this import ground control,

481
00:54:16,100 --> 00:54:22,080
or there is this option right here in the alignment tab. Right here import ground control.

482
00:54:22,080 --> 00:54:28,160
So, I will click on that. Let me find my ground control points.

483
00:54:28,160 --> 00:54:31,760
I already prepared this text file let me
open it first. 

484
00:54:31,760 --> 00:54:39,210
Just to show you what is..
What is the format of the points. 

485
00:54:39,210 --> 00:54:46,207
So here, right click open with Notepad. So, It´s just five points. 

486
00:54:46,207 --> 00:54:52,282
This is the label of the points of points five, four, six, seven and eight. 

487
00:54:52,880 --> 00:54:57,040
And these are the coordinates in WGS 84. 

488
00:54:57,040 --> 00:55:05,013
So this is the longitude. This is the
latitude and this is the ellipsoid altitude. 

489
00:55:05,013 --> 00:55:08,612
And they are separated by space. 

490
00:55:09,440 --> 00:55:14,640
What I like to do is also incorporate this in the name of the file. 

491
00:55:14,640 --> 00:55:21,109
So It's a GCP WGS 84 underscore latitude, underscore longitude,  underscore altitude 

492
00:55:21,143 --> 00:55:23,476
and the separatory space. 

493
00:55:23,509 --> 00:55:30,559
Just not to make mistakes. This is just, this works for me. 

494
00:55:30,559 --> 00:55:35,007
Okay, so let me close this. So I will click on this open. 

495
00:55:36,173 --> 00:55:43,920
So and now choose the file format, so I need to switch this. So It's name

496
00:55:43,920 --> 00:55:48,720
It´s name longitude and latitude and I
need to change it to name

497
00:55:48,720 --> 00:55:55,003
lack latitude longitude altitude and 
value separator Reality Capture actually

498
00:55:55,069 --> 00:55:58,002
can determine the separator automatically. 

499
00:55:58,169 --> 00:56:03,200
So, it knows that the space is the separator. 

500
00:56:03,200 --> 00:56:08,533
Ignore first line no, because there
wasn't a header in the text file. 

501
00:56:08,600 --> 00:56:11,599
So, this can be left to NO. 

502
00:56:11,599 --> 00:56:16,559
And the coordinate system is correct and position accuracy..

503
00:56:16,559 --> 00:56:20,720
These values are from the alignment tab. The default values if you remember, 

504
00:56:20,720 --> 00:56:24,697
I mentioned that Global Digital Heritage didn't provide me the accuracy, 

505
00:56:24,763 --> 00:56:27,119
so I left it at default. 

506
00:56:27,119 --> 00:56:34,240
And now I will click ok and they were
imported right here. 

507
00:56:34,960 --> 00:56:47,692
So now what I need to do is place these ground control points in the component. 

508
00:56:47,992 --> 00:56:52,025
So what I did. There are multiple ways, because right now you don´t know

509
00:56:52,058 --> 00:56:56,024
where's the north, where´s the south, you don't know how it is orientated. 

510
00:56:56,357 --> 00:57:02,156
You would know that if I let the approximate Geo-reference

511
00:57:02,189 --> 00:57:09,855
from the drone shots, but I didn't use it right now so it will be a little much 

512
00:57:09,888 --> 00:57:12,987
challenging for me to place the control points but I can handle it. 

513
00:57:13,354 --> 00:57:17,986
Okay so let's try to change the view again. 

514
00:57:18,353 --> 00:57:22,985
Let's keep the top right corner as a 3D view. 

515
00:57:23,019 --> 00:57:27,984
Let's change the bottom right corner to a map view.

516
00:57:28,018 --> 00:57:35,520
I will zoom in to the ground control points and now when I rotate this 3D view

517
00:57:35,520 --> 00:57:44,514
little bit, now I can align it to the north and now I have an idea where

518
00:57:44,548 --> 00:57:46,347
the ground control points should be. 

519
00:57:46,514 --> 00:57:50,346
Okay so ground control point number five should be somewhere around here. 

520
00:57:50,413 --> 00:57:54,346
So let's try to find it and let's try to place it. 

521
00:57:54,412 --> 00:57:57,978
I will activate the control point tool again. 

522
00:57:58,012 --> 00:58:06,277
Highlight ground control point number five and hover with my mouse cursor over

523
00:58:06,310 --> 00:58:13,975
the point cloud and here in the bottom left view I have a 2D view and I get 

524
00:58:14,008 --> 00:58:20,341
live previews of my 3D cursor actually on the point cloud so it is displaying

525
00:58:21,200 --> 00:58:27,920
images that can see the place. That my mouse cursor is over. So here

526
00:58:27,920 --> 00:58:31,920
we have the ground control point number five. I don't have to place it

527
00:58:31,920 --> 00:58:36,079
really that accurate right now. So maybe, okay I will place it here. 

528
00:58:36,079 --> 00:58:42,480
Because I will refine it´s position later. Okay, so that would be control point

529
00:58:42,480 --> 00:58:47,502
number five, then I would add control point, ground control point number six. 

530
00:58:47,535 --> 00:58:53,534
It should be somewhere around here.  Let's try to place it as well. 

531
00:58:53,567 --> 00:59:01,532
So again activate the tool. Highlight the corresponding ground control point and 

532
00:59:01,566 --> 00:59:10,864
let's try to find it. And actually here it is. I can place it and zoom in. 

533
00:59:10,931 --> 00:59:18,529
No it's actually number eight. I'm blind, yes this is number eight. So no I have to delete

534
00:59:18,562 --> 00:59:26,128
this two suggestions, highlight number eight and again place it right here. 

535
00:59:27,027 --> 00:59:37,025
We'll zoom out a little bit like this. Okay so and then I would continue with the other

536
00:59:37,025 --> 00:59:42,158
ground control points. So let me disable the control point tool by right clicking and 

537
00:59:42,158 --> 00:59:48,523
now I will select the first suggestion for ground control point number five, 

538
00:59:49,760 --> 00:59:53,119
but I need to make sure that this 2D
view is displaying 

539
00:59:53,119 --> 01:00:00,799
the blur cursor blue cursor like this. 
Okay and now I can refine it´s position. 

540
01:00:00,799 --> 01:00:06,786
So I would click on it. Move it to the
right spot and confirm it by pressing the 

541
01:00:06,786 --> 01:00:15,520
down arrow key. It would confirm it´s position and select the next image like this

542
01:00:15,520 --> 01:00:23,283
like this and now RC gave me multiple other suggestions so I can go over

543
01:00:23,283 --> 01:00:31,048
all of them. This is actually a laser scan and it's visible that's great. 

544
01:00:31,359 --> 01:00:37,013
Because they were probably placing and removing the ground control points

545
01:00:37,013 --> 01:00:40,679
around the time they were using the laser scans, because I noticed that some

546
01:00:40,679 --> 01:00:44,012
laser scan positions do not contain the ground control points. 

547
01:00:44,179 --> 01:00:48,000
But I guess we're lucky that this time. 

548
01:00:48,000 --> 01:00:55,110
So I can place it here and go through all of the drone shots. 

549
01:00:58,480 --> 01:01:03,440
I will not conf all of them only a few of them like this. 

550
01:01:03,440 --> 01:01:10,000
But basically it's the same thing like
placing the control points. 

551
01:01:10,000 --> 01:01:15,280
Like this like this and so on. I will not
go over all of them. 

552
01:01:15,280 --> 01:01:22,160
And again I also increased the weight
of the ground control points so

553
01:01:22,160 --> 01:01:26,837
I need to have my control point selected and here, here's the weight.

554
01:01:26,937 --> 01:01:30,960
So again I increased it to 100. 

555
01:01:33,280 --> 01:01:36,960
And that's it. After I placed all of the
ground control points. 

556
01:01:36,960 --> 01:01:44,500
I ran the alignment again and saved the alignment. And after that I was continuing 

557
01:01:44,500 --> 01:01:49,199
with the reconstruction. So you would go to the reconstruction tab, 

558
01:01:49,366 --> 01:01:57,198
set the reconstruction region. So I just wanted to reconstruct this tomb

559
01:01:57,680 --> 01:02:01,697
in the middle of our point cloud. I didn't want the other surroundings. 

560
01:02:01,697 --> 01:02:08,395
So I can actually demonstrate it. I set the reconstruction region. 

561
01:02:08,429 --> 01:02:18,559
Let's try automatically. Okay not bad. Let me just change to the OnePlus One view. 

562
01:02:18,559 --> 01:02:23,760
So we have a larger 3D view. I will
switch to the top view by pressing 2 

563
01:02:23,760 --> 01:02:27,392
on the new numeric keyboard. Adjust the position like this.  

564
01:02:29,839 --> 01:02:36,480
Like this from one of the side views. 
So we're not cropping anything out. 

565
01:02:36,480 --> 01:02:42,689
So and this was my reconstruction region. And now I could just click 

566
01:02:42,689 --> 01:02:48,121
on normal detail and the reconstruction would run with the downsize of the

567
01:02:48,121 --> 01:02:51,839
original images set to two. 

568
01:02:52,000 --> 01:02:55,599
I actually didn't disable any cameras
from the reconstruction for the first

569
01:02:55,599 --> 01:03:00,385
reconstruction I mean, because I was confident that the alignment is fine. 

570
01:03:00,585 --> 01:03:07,017
So what I actually did, I exported the reconstruction region. 

571
01:03:07,117 --> 01:03:12,249
I will show you how I did that. I went to the reconstruction tab, 

572
01:03:12,283 --> 01:03:19,415
export reconstruction region and the reason why I did this is because I used

573
01:03:19,448 --> 01:03:25,280
another CLI script for the the reconstruction and I used a command

574
01:03:25,280 --> 01:03:29,513
to load this reconstruction region. I can show you the script right now.  

575
01:03:29,613 --> 01:03:36,400
Let me just open my file explorer. Let's find the CLI folder. 

576
01:03:36,400 --> 01:03:41,677
Here is the batch file reconstruction. So let me open it with Notepad and let´s 

577
01:03:41,710 --> 01:03:49,409
check it out. So again this is just copy and paste to define the paths. So I would run

578
01:03:49,409 --> 01:03:54,174
Reality Capture, load the project - reconstruction, because I saved it

579
01:03:54,174 --> 01:03:59,973
as a reconstruction.RC project. I would select the component Georeferenced, 

580
01:04:00,007 --> 01:04:07,938
because after this alignment after this realignment I created another 

581
01:04:07,938 --> 01:04:11,200
component and I renamed it to Georeferenced. 

582
01:04:11,200 --> 01:04:17,503
So it would select that component. Then set reconstruction region. 

583
01:04:17,503 --> 01:04:21,760
Yes it would load the reconstruction region that I exported. 

584
01:04:21,760 --> 01:04:27,434
Then it would calculate the mesh with the normal detail after the reconstruction

585
01:04:27,434 --> 01:04:33,000
it would save the project, select the model number one, because there will be only 

586
01:04:33,000 --> 01:04:38,899
one model, but I put this command there anyway. Rename the selected model to

587
01:04:38,899 --> 01:04:44,480
source, then select largest model
component. 

588
01:04:44,480 --> 01:04:50,030
It would select the...If you have any
floating parts around, some small parts

589
01:04:51,196 --> 01:04:57,828
in the mesh, it would select the largest connected part and then I would 

590
01:04:57,862 --> 01:05:03,119
invert the selection to select the
small floating parts and then I use the 

591
01:05:03,127 --> 01:05:09,293
remove selected triangles command to get rid of them, because I don´t want them

592
01:05:09,360 --> 01:05:16,791
in the next steps. After this it would save again the same project to 

593
01:05:16,791 --> 01:05:23,823
reconstruction.RC project. Import image selection and this is the image selection

594
01:05:23,823 --> 01:05:30,655
for the laser scans and after that it would disable them from the texturing so

595
01:05:30,689 --> 01:05:34,488
the command is enabled texturing and coloring to false. 

596
01:05:36,021 --> 01:05:42,520
So the laser scans would not degrade the quality of the texture. I want the texture

597
01:05:42,553 --> 01:05:49,599
to be created only from photogrammetry. Then I set the unwrap max unwrap style. 

598
01:05:49,599 --> 01:05:56,960
No this is the unwrap resolution to 16k and wrap style to fixed axle size. 

599
01:05:56,960 --> 01:06:00,799
Unwrap fixed axle size type 0 this means the optimal. 

600
01:06:00,799 --> 01:06:04,559
So I would get 100% quality this right
here. 

601
01:06:04,559 --> 01:06:09,280
And then I would set texture recolor
after texturing to false, because I don't

602
01:06:09,280 --> 01:06:17,979
want my mesh to be recolored. I'm just not used to work with vertex colors. 

603
01:06:18,160 --> 01:06:23,245
I prefer working with textures and then it would use this calculate texture

604
01:06:23,245 --> 01:06:27,760
command to calculate the texture and save the project. 

605
01:06:27,760 --> 01:06:32,400
Save the project and quit RC and then
shut down the computer. 

606
01:06:32,400 --> 01:06:38,708
And in the morning I was checking the results and there were the artifacts and

607
01:06:38,708 --> 01:06:46,174
the mesh surface and also the texture was terrible. So that's when I decided to pick

608
01:06:46,240 --> 01:06:49,520
a smaller part of the mesh and start
experimenting. 

609
01:06:49,520 --> 01:06:57,599
And now I will show you what I did, okay? So let me close this and I can also

610
01:06:57,599 --> 01:07:01,839
close this project right now. 

611
01:07:01,920 --> 01:07:07,839
By the way if you are interested in CLI
more you can always press F1 to open the

612
01:07:07,839 --> 01:07:13,968
help view and right down here you have the command line interface, 

613
01:07:14,002 --> 01:07:18,634
all CLI commands, these are the CLI setting keys and values and so on. 

614
01:07:18,634 --> 01:07:25,033
If you click for example this here are all the commands and that I used in my CLI

615
01:07:25,039 --> 01:07:29,232
scripts, because I memorized some of them, but of course not all of them. 

616
01:07:29,232 --> 01:07:35,697
So sometimes I need to go here and check. And I just copy and paste these

617
01:07:35,697 --> 01:07:40,799
commands to build up my scripts, but once you get used to it you will

618
01:07:40,799 --> 01:07:46,628
just copy and paste your scripts. Modify them and actually I like it more than

619
01:07:46,628 --> 01:07:48,880
working with the user interface. 

620
01:07:48,880 --> 01:07:54,559
It's not always possible, but when it is
I prefer to work this way. 

621
01:07:54,559 --> 01:07:59,440
Okay so let me go back. I can close this project. 

622
01:07:59,440 --> 01:08:07,599
I do not want to save it. And now I will open the project with the reconstruction. 

623
01:08:07,599 --> 01:08:12,090
So right now you can see that I have
multiple bottles in here, because 

624
01:08:12,090 --> 01:08:15,520
I was doing some experimenting. 

625
01:08:15,520 --> 01:08:22,255
But I will show you basically what I did. So let me disable this model. 

626
01:08:22,255 --> 01:08:27,120
Let me view the tie points. 

627
01:08:27,520 --> 01:08:30,960
Okay right like this. 

628
01:08:31,040 --> 01:08:35,359
Let me clear the reconstruction region as well. 

629
01:08:35,359 --> 01:08:40,319
Okay so I decided that I will make my
experiments in this part with this small

630
01:08:40,319 --> 01:08:49,683
opening or window. So first I created a reconstruction region. So I went to set

631
01:08:49,683 --> 01:08:56,515
reconstruction region. Let's make it on a grid again. Like this. I will adjust it.

632
01:08:58,480 --> 01:09:02,159
I will adjust it from the top view. 

633
01:09:03,199 --> 01:09:10,778
Like this like this and the back part of the reconstruction region, I put it almost

634
01:09:10,845 --> 01:09:16,544
in the middle of the wall, because I wanted to only play or experiment with the front

635
01:09:16,544 --> 01:09:23,276
side of the wall. So this is from the top view like this. 

636
01:09:25,120 --> 01:09:30,974
Like this and like this. Okay and here you can see multiple experiments. 

637
01:09:31,008 --> 01:09:35,873
So I tried lasers plus photos only. Then I tried lasers only. 

638
01:09:35,873 --> 01:09:44,172
Then I tried lasers only plus disabling scan scanned station, that was right here. 

639
01:09:44,205 --> 01:09:52,670
Because it was causing the artifacts in the mesh surface. And then I have 

640
01:09:52,703 --> 01:09:59,235
lasers plus photos plus the disabled laser scan position and I found that

641
01:09:59,235 --> 01:10:04,568
the lasers only test minus the one scan station was the best result. 

642
01:10:04,568 --> 01:10:08,900
But I will show you how I disabled and enabled the cameras right now.  

643
01:10:08,900 --> 01:10:14,999
So let me just make the cameras a little bit bigger. So we can see them like this. 

644
01:10:14,999 --> 01:10:18,960
Maybe a little bit bigger. Like this. So I will select all of them 

645
01:10:18,960 --> 01:10:26,497
by pressing Ctrl A and here you can see that I have almost 3000 inputs. 

646
01:10:26,719 --> 01:10:32,196
And enable alignment meshing texturing coloring and weight and texturing, 

647
01:10:32,196 --> 01:10:34,400
all have different values. 

648
01:10:34,400 --> 01:10:40,027
Because I was tweaking all of these
values. And some should be even disabled. 

649
01:10:40,061 --> 01:10:43,627
Let me check let me deselect everything by pressing Ctrl D. 

650
01:10:43,993 --> 01:10:50,725
Yes, these red cameras are totally disabled from anything from the reconstruction and

651
01:10:50,725 --> 01:10:56,357
also from the texturing so you can see that I only enabled the cameras that were in

652
01:10:56,357 --> 01:10:58,957
close proximity of the tomb. 

653
01:11:01,679 --> 01:11:05,040
So but I will enable all of them right now. 

654
01:11:05,040 --> 01:11:15,020
I will select all of them and press Ctrl R and again because the first control are

655
01:11:15,020 --> 01:11:18,353
disabled all of them and the second control are enabled all of them. 

656
01:11:18,353 --> 01:11:25,252
So now when I.. Let's press Ctrl D or I can also deselect them by this command. 

657
01:11:25,252 --> 01:11:28,784
Where is it? Here, deselect the shortcut is Ctrl D. 

658
01:11:28,851 --> 01:11:36,849
Now none of the cameras are in red.  Everything is enabled and I will 

659
01:11:36,849 --> 01:11:42,015
select them again all of them and enable everything. I will enable them in alignment 

660
01:11:42,015 --> 01:11:46,960
enabled in meshing enabled in
texturing. Okay so everything is great. 

661
01:11:47,280 --> 01:11:51,840
So now I created a clipping box from the reconstruction region. 

662
01:11:51,840 --> 01:11:55,280
So I went to the scene. Create clipping box. 

663
01:11:55,280 --> 01:12:03,280
Create from reconstruction region
like this, okay. 

664
01:12:03,280 --> 01:12:08,976
Deselect everything by pressing Ctrl D. Now I use the select point tool. 

665
01:12:08,976 --> 01:12:11,760
So from the alignment tab point lasso tool. 

666
01:12:11,760 --> 01:12:16,719
Or pressing D and I selected these
points. 

667
01:12:17,120 --> 01:12:22,960
I disabled the tool and I use the find
images to select the images that can see

668
01:12:22,960 --> 01:12:27,773
these points. So these are the images. 

669
01:12:27,973 --> 01:12:36,171
Then I invert the selection like this by pressing Ctrl plus I or by pressing 

670
01:12:36,171 --> 01:12:46,320
this command, invert like this. And I disabled them again so press Ctrl R. 

671
01:12:46,320 --> 01:12:48,002
And they are disabled.

672
01:12:51,001 --> 01:12:58,080
Great I can deselect everything again. 

673
01:12:58,320 --> 01:13:04,880
And the next thing I did was to select
all of the laser scans and I did that

674
01:13:04,880 --> 01:13:09,840
using the image list. So let's select them. 

675
01:13:09,840 --> 01:13:13,199
Let's go to the workflow tab. Import image selection. 

676
01:13:13,199 --> 01:13:21,760
Use the laser scans. Open again invert the selection. 

677
01:13:22,320 --> 01:13:27,628
Like this and again disable all of the
images by pressing Ctrl R. 

678
01:13:27,994 --> 01:13:35,120
Now when I deselect them..
So everything is disabled except

679
01:13:35,120 --> 01:13:40,080
a few scan stations that can see these points. 

680
01:13:40,080 --> 01:13:43,858
And actually when I click here on inputs you can see

681
01:13:43,858 --> 01:13:47,840
that all of the images are disabled. 

682
01:13:49,280 --> 01:13:57,760
All of them. And from the Point Cloud Rig here only some of them are enabled. 

683
01:13:57,760 --> 01:14:04,960
That can see these visible points. 
So this is the way I used image

684
01:14:04,960 --> 01:14:13,418
selections to use as few inputs as possible to make faster experiments

685
01:14:13,418 --> 01:14:18,684
because if I would calculate this small mesh part with everything it would take

686
01:14:18,684 --> 01:14:23,520
much much longer. And I didn't really want to waste any more time because

687
01:14:23,520 --> 01:14:28,640
I was already spending too much time on this project. 

688
01:14:28,640 --> 01:14:31,679
So let me show you the actual results. 

689
01:14:31,679 --> 01:14:44,000
So let me highlight the lasers only test, yes. Let's go to the..

690
01:14:44,000 --> 01:14:48,159
We are in the solid view, but I want to  disable the type ones. 

691
01:14:48,159 --> 01:14:54,510
Like this. Okay so you already saw this in the beginning of this webinar 

692
01:14:54,510 --> 01:15:01,009
in the presentation. And the other best..This is the lasers only plus one

693
01:15:01,009 --> 01:15:10,560
scan offset of test. So I found this to be the most consistent one. 

694
01:15:10,560 --> 01:15:15,040
So I decided to go with the laser scans only. 

695
01:15:15,040 --> 01:15:20,838
But here you can see that the top of the wall or of the tomb was not visible 

696
01:15:20,838 --> 01:15:24,504
from any laser scan position, because they were at ground level.

697
01:15:24,671 --> 01:15:32,170
So I needed to enable a couple of drone shots to reconstruct even the top. 

698
01:15:32,569 --> 01:15:35,336
So we can start all over again. 

699
01:15:35,336 --> 01:15:39,668
So let's clear the clipping box. 

700
01:15:42,159 --> 01:15:47,033
Let's view the tie points, let's disable
the mesh. 

701
01:15:48,266 --> 01:15:53,865
Let's select all of the laser scans actually. 

702
01:15:57,365 --> 01:16:02,763
Yes let's do it like that. And I don't have to use the image list actually, because

703
01:16:02,763 --> 01:16:09,196
they are grouped nicely under this point cloud rigs. So I will select the first one. 

704
01:16:09,360 --> 01:16:12,080
Scroll down

705
01:16:13,040 --> 01:16:17,040
And select the bottom one, but I need to hold down Shift key. 

706
01:16:17,040 --> 01:16:20,320
Like this. So now all of them are selected. 

707
01:16:20,320 --> 01:16:27,192
And now I will press Ctrl R, it will disable all of them. I will press Ctrl R again

708
01:16:27,292 --> 01:16:30,960
and this will enable all of them. 

709
01:16:32,719 --> 01:16:38,690
Next what I did is to select all of the drone shots and enable all of them first. 

710
01:16:39,689 --> 01:16:43,280
So I would do that with an image list. 

711
01:16:43,280 --> 01:16:48,521
I will go to the workflow tab import image selection, select the drone images. 

712
01:16:48,521 --> 01:16:50,687
So it's this one. 

713
01:16:52,720 --> 01:17:00,685
Enable all of them and there should be all enabled. 

714
01:17:03,685 --> 01:17:09,684
Yes and then I went to a side view. Not the top view. The side view. 

715
01:17:10,017 --> 01:17:15,682
And I decided that I will disable all the cameras that are above this point. 

716
01:17:16,000 --> 01:17:21,679
Or above this line. So I would deselect everything by pressing Ctrl D 

717
01:17:21,679 --> 01:17:29,980
using the camera lasso or by pressing C on the keyboard. I would select all of these

718
01:17:30,179 --> 01:17:33,120
like this, 

719
01:17:33,920 --> 01:17:38,800
like this and press Ctrl R to disable them. 

720
01:17:38,800 --> 01:17:46,676
Disable the tool deselect and now only the laser scans and only these drone shots

721
01:17:46,676 --> 01:17:50,880
will be used for reconstructing the mesh. 

722
01:17:53,600 --> 01:17:58,239
Okay I almost forgot to disable also the scan station, 

723
01:17:58,239 --> 01:18:05,139
because this was the one that was causing the artifacts around this window. 

724
01:18:05,306 --> 01:18:09,838
So I will quickly disable them press Ctrl C for the camera lasso

725
01:18:09,838 --> 01:18:15,520
select and press Ctrl R to disable them. 

726
01:18:15,679 --> 01:18:20,080
Great and I almost forgot another thing. 

727
01:18:20,080 --> 01:18:26,002
I will show you one tip. For example when I was making the selection 

728
01:18:26,002 --> 01:18:30,068
for the drone shots, so let me do the selection one more time.

729
01:18:30,934 --> 01:18:37,733
I will again activate the camera lasso.  Select all of these cameras like this.

730
01:18:38,366 --> 01:18:45,698
And now if I press Ctrl Shift F1 Reality Capture will remember this selection. 

731
01:18:45,698 --> 01:18:54,529
So I will deselect all of them and now when I press Ctrl Shift and one I will

732
01:18:54,529 --> 01:18:57,196
select the saved selection before. 

733
01:18:57,196 --> 01:19:03,494
So this is a great tip and it was very useful when doing such selections 

734
01:19:03,494 --> 01:19:09,093
as I was doing in this project. Because later during texturing I was doing 

735
01:19:09,227 --> 01:19:15,192
multiple selections. I was selecting the outside the cameras that were further

736
01:19:15,192 --> 01:19:20,480
away from the tomb. I didn't totally disable them. I just lowered the weight

737
01:19:20,480 --> 01:19:25,423
in the texturing. But I will show you that in a couple of minutes.

738
01:19:25,690 --> 01:19:32,122
So now I was prepared for the reconstruction. My reconstruction region

739
01:19:32,122 --> 01:19:38,187
is this one so I need to update it. But if you remember I exported my reconstruction

740
01:19:38,187 --> 01:19:41,020
region so I can use the same one again. 

741
01:19:41,020 --> 01:19:47,986
So I can bring it in from the reconstruction tab, from import and import

742
01:19:48,019 --> 01:19:54,000
reconstruction region. I have another folder just for it. 

743
01:19:54,000 --> 01:19:57,760
I have multiple reconstruction regions, because I was for the tests. 

744
01:19:57,760 --> 01:20:03,582
I was not just using this small area for the testing. I was using different areas also. 

745
01:20:05,015 --> 01:20:09,199
But which one's the main one..This one!

746
01:20:09,199 --> 01:20:17,346
Reconstruction, this is the one. And after this I just went to the reconstruction tab. 

747
01:20:17,346 --> 01:20:20,779
Of course I saved before the reconstruction like this. 

748
01:20:21,012 --> 01:20:26,844
And then I didn't run a CLI script, because I was doing this in the middle of the day. 

749
01:20:26,844 --> 01:20:30,560
So I just run normal detail and I went for lunch. 

750
01:20:30,560 --> 01:20:37,120
And it actually was pretty quick.  Maybe I can maybe you can check. 

751
01:20:37,120 --> 01:20:42,239
I think this is the one that was created, so this mesh. 

752
01:20:43,040 --> 01:20:46,639
Not enough video memory. Yes I know it do not show again. 

753
01:20:46,639 --> 01:20:55,172
And when I see the report here. So the depth map calculation time took 

754
01:20:56,800 --> 01:21:02,080
59 minutes meshing three hours and 21 minutes. 

755
01:21:02,080 --> 01:21:07,170
And overall processing time was around 5 hours and 23 minutes. 

756
01:21:07,170 --> 01:21:12,069
So but luckily I have another computer so I could do other work as well. 

757
01:21:13,600 --> 01:21:21,679
Okay and so I will disable the tie points. 

758
01:21:22,159 --> 01:21:29,032
And this is the mesh that I actually got, but we are only viewing it in the vertices mode, 

759
01:21:29,040 --> 01:21:39,263
because it has 243 million triangles and it's more than my GPU can display

760
01:21:39,263 --> 01:21:49,528
at one time. So I simplified the mesh to 40 million polygons, it's this simplified one. 

761
01:21:54,080 --> 01:21:57,840
I will view it in solid view. 

762
01:21:58,400 --> 01:22:04,292
And this time we will be actually able
to see the mesh surface like this. 

763
01:22:04,625 --> 01:22:11,657
So there is still some noise visible from the laser scanner, but it is much better

764
01:22:11,657 --> 01:22:14,856
than the initial results. 

765
01:22:20,560 --> 01:22:28,719
So this is the surface. After this mesh
was finished I again saved the project

766
01:22:28,719 --> 01:22:35,786
and started the texturing. So first I needed to select all of the scan stations and 

767
01:22:35,786 --> 01:22:41,984
disable them for texturing. So again I can just quickly load the image selection. 

768
01:22:42,000 --> 01:22:49,683
So laser scans and I just went here for the selected inputs. There are some different 

769
01:22:49,683 --> 01:22:58,960
values, but I want to enable texturing and coloring set to disable. 

770
01:22:59,120 --> 01:23:04,159
Okay so the scan stations are disabled from the texturing. 

771
01:23:04,159 --> 01:23:10,960
Next I want to enable some of the drone shots are already enabled. 

772
01:23:10,960 --> 01:23:17,677
And I want to also enable the ground images. So I can do that again with

773
01:23:17,677 --> 01:23:21,040
image lists. So I can go to the workflow. 

774
01:23:21,040 --> 01:23:26,159
Import image selection, zoom interior. 

775
01:23:28,159 --> 01:23:35,507
I want to enable them and I think that I kept the weight in texturing at one

776
01:23:35,507 --> 01:23:38,719
for all of these cameras right here. 

777
01:23:38,719 --> 01:23:45,679
Then I imported the selection for the afternoon. 

778
01:23:45,679 --> 01:23:55,003
Like this. So again I need to enable them and wait in texturing. 

779
01:23:55,003 --> 01:24:02,135
I probably change some of the weights here, but I don't see a reason, that I should

780
01:24:02,135 --> 01:24:08,334
done it, because they are relatively close to the wall. So I will change it to one

781
01:24:08,334 --> 01:24:15,632
for all of them. Like this and then I select the rest again by using 

782
01:24:15,632 --> 01:24:20,000
the image selection and it was from the morning. 

783
01:24:20,000 --> 01:24:30,030
Yes, again I enabled all of them for texturing, but I lowered the weight. It was

784
01:24:30,030 --> 01:24:39,028
only about, let's check this one 0.01. 
So I set the weight in texturing 0.01 

785
01:24:39,028 --> 01:24:43,994
for all the sets from the morning, because they were further away from the wall. 

786
01:24:43,994 --> 01:24:48,026
And after all of this was done I went to the reconstruction tab, 

787
01:24:48,026 --> 01:24:52,459
I checked the texturing settings if they are what I need. 

788
01:24:54,400 --> 01:25:01,840
And I set 16k, I set fixed XL size and the optimal text size. 

789
01:25:01,840 --> 01:25:08,455
And after this I just click on texture and I had to wait a couple of hours to it to

790
01:25:08,455 --> 01:25:12,355
finish and that's when I got this result. 

791
01:25:12,621 --> 01:25:18,820
Model textures, let's display this first picture. 

792
01:25:27,840 --> 01:25:33,684
It will take a couple of seconds to load, because it's three 16k textures,

793
01:25:33,684 --> 01:25:42,915
so it's a lot of data. But we are starting to see something and you can already see, 

794
01:25:42,915 --> 01:25:47,014
that there are some artifacts, there are some blurry, I got this. 

795
01:25:47,679 --> 01:25:55,840
And you can see that some parts are okay, but some parts are looking just terrible. 

796
01:25:56,480 --> 01:26:00,800
So at this point I was trying to figure out what to do next. 

797
01:26:00,800 --> 01:26:06,011
And of course you could do some fixes with projections in other 3D software, but

798
01:26:06,011 --> 01:26:10,210
I wanted to fix everything in Reality Capture or not everything, but 

799
01:26:10,210 --> 01:26:12,409
as much as can be done. 

800
01:26:12,509 --> 01:26:19,008
So I decided to make a test. So I used all of the photogrammetry images

801
01:26:19,008 --> 01:26:22,341
all of the sources to create another mesh and it's this one. 

802
01:26:22,341 --> 01:26:29,973
It´s the mesh that I called texture. Let me click on it. Let's see the report in some

803
01:26:29,973 --> 01:26:37,004
settings. And here you can actually see that I used the image downscale factor for

804
01:26:37,004 --> 01:26:41,537
that maps to 4, because I didn't want it to take too much time. 

805
01:26:41,537 --> 01:26:47,169
So I reconstructed the mesh only from the photogrammetry inputs and then texture it. 

806
01:26:47,169 --> 01:26:55,168
Again with the same enabled cameras. And I can actually turn on the color. 

807
01:26:55,168 --> 01:27:00,900
No, it is actually in sweet mode, but because I don't have any vertex colors, so

808
01:27:01,100 --> 01:27:08,665
that is why the point cloud is not colored. So to view the textures I had to always

809
01:27:08,665 --> 01:27:14,320
create renders using the export render tool. 

810
01:27:15,040 --> 01:27:16,630
But then I decided to.. 

811
01:27:16,730 --> 01:27:21,696
And I make some renders and I noticed that the texture is looking fine. 

812
01:27:21,696 --> 01:27:28,061
So I decided that I will transfer this texture from this photogrammetry mesh to my

813
01:27:28,061 --> 01:27:29,520
laser scan mesh. 

814
01:27:29,520 --> 01:27:35,026
And for that I used the texture reprojection tool and it's located right here, 

815
01:27:35,026 --> 01:27:38,480
in the reconstruction tab. 

816
01:27:38,639 --> 01:27:46,591
So I selected my source model. And it should be the texture, because I will be 

817
01:27:46,591 --> 01:27:54,023
transferring the texture from the mesh gold texture and my simplified mesh. 

818
01:27:56,080 --> 01:28:01,688
And when I use this reprojection distance I was still getting bad results, still some 

819
01:28:01,688 --> 01:28:06,020
artifacts and still some blurry parts of the texture. 

820
01:28:06,020 --> 01:28:12,019
So I decided to switch this to custom. And I increased this custom reprojection 

821
01:28:12,019 --> 01:28:14,685
distance to 0.5. 

822
01:28:15,685 --> 01:28:24,239
Like this. And then I just clicked on reproject and to display it. 

823
01:28:24,239 --> 01:28:29,516
My simplified mesh has two color layers. This first one is the bad texture and 

824
01:28:29,516 --> 01:28:32,415
this color layer number two is the good texture. 

825
01:28:32,515 --> 01:28:40,347
So let me load it right now. And this will be the result that you saw in the render, 

826
01:28:40,347 --> 01:28:45,360
that I showed you in the beginning of this webinar. 

827
01:28:45,520 --> 01:28:51,111
Again let's wait a couple of seconds to finish the loading. 

828
01:28:57,120 --> 01:29:01,009
And you can already see, that it is looking much much better 

829
01:29:01,009 --> 01:29:04,239
than the previous texture. 

830
01:29:07,280 --> 01:29:12,340
And that's it. That is how I got my best result so far. 

831
01:29:12,340 --> 01:29:18,672
I´m not saying, that this is the final result. I will try to take another look at this project, 

832
01:29:18,972 --> 01:29:26,004
but that's it. I hope you learned something new and if you like this kind of content and

833
01:29:26,004 --> 01:29:30,320
these types of videos, please let us know and we will try to make more. 

834
01:29:30,320 --> 01:29:34,936
So it was Jakub Vanko for Capturing
Reality. Thank you very much 

835
01:29:34,936 --> 01:29:39,502
for watching and have a nice day, bye. 

